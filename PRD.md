# PRD: KOSPI 상승 전망 모니터링 대시보드

**문서 버전**: v1.0
**작성일**: 2025-11-04
**프로젝트명**: Vibe Kanban (KOSPI Monitoring Dashboard)
**프로젝트 타입**: 개인용 웹 대시보드

---

## 📋 목차

1. [프로젝트 개요](#1-프로젝트-개요)
2. [핵심 목표 및 성공 지표](#2-핵심-목표-및-성공-지표)
3. [사용자 페르소나](#3-사용자-페르소나)
4. [핵심 기능 명세](#4-핵심-기능-명세)
5. [기술 스택 및 아키텍처](#5-기술-스택-및-아키텍처)
6. [데이터 소스 및 API 통합](#6-데이터-소스-및-api-통합)
7. [UI/UX 설계](#7-uiux-설계)
8. [개발 로드맵](#8-개발-로드맵)
9. [비기능 요구사항](#9-비기능-요구사항)
10. [위험 요소 및 대응 방안](#10-위험-요소-및-대응-방안)

---

## 1. 프로젝트 개요

### 1.1 배경 및 목적

**배경:**
- 코스피 지수의 방향성(3,300 재압박 vs 5,000 돌파)을 데이터 기반으로 판단하기 어려움
- 확증편향 없이 객관적인 지표를 통한 시장 모니터링 필요
- Google 스프레드시트의 한계(자동화 제약, 시각화 부족) 극복

**목적:**
> **코스피 시장의 10대 핵심 지표를 실시간으로 추적하고, 종합 점수를 통해 상승/하락 시나리오를 시각적으로 모니터링하는 개인용 웹 대시보드**

### 1.2 프로젝트 범위

**포함사항 (In Scope):**
- ✅ 10개 핵심 지표의 자동/수동 데이터 수집
- ✅ 과거 데이터 히스토리 저장 및 추세 분석
- ✅ 종합 점수 자동 계산 및 시나리오 판정
- ✅ 관리자 UI를 통한 수동 데이터 입력
- ✅ 일간 자동 데이터 갱신
- ✅ 조건부 이메일 알림 (종합 점수 변동 시)

**제외사항 (Out of Scope):**
- ❌ 모바일 네이티브 앱
- ❌ 다중 사용자 계정 관리
- ❌ 실시간 스트리밍 데이터 (일간 업데이트로 충분)
- ❌ 소셜 공유 기능
- ❌ 백테스팅 시뮬레이션

---

## 2. 핵심 목표 및 성공 지표

### 2.1 핵심 목표

| 목표 | 설명 | 우선순위 |
|------|------|---------|
| **데이터 자동화** | 7개 지표는 API/스크래핑으로 자동 수집 | P0 |
| **신뢰성 있는 판정** | 10개 지표의 종합 점수로 객관적 시나리오 제시 | P0 |
| **추세 파악** | 과거 데이터 기반 그래프로 방향성 시각화 | P1 |
| **즉각적 알림** | 중요 변화 발생 시 이메일 알림 | P1 |

### 2.2 성공 지표 (KPI)

| 지표 | 목표값 | 측정 방법 |
|------|--------|-----------|
| **데이터 수집 성공률** | ≥ 95% | 일간 수집 실패 건수 / 총 시도 건수 |
| **대시보드 로딩 속도** | ≤ 2초 | 초기 로딩 시간 측정 |
| **알림 정확도** | 100% | 조건 충족 시 알림 발송 성공률 |
| **데이터 히스토리 보존** | 100% | 과거 데이터 무손실 저장 |

---

## 3. 사용자 페르소나

### Primary Persona: 개인 투자자 (본인)

**기본 정보:**
- **역할**: 개인 투자자
- **목표**: 코스피 시장 방향성을 데이터 기반으로 판단
- **사용 환경**: 데스크톱 브라우저 (Chrome/Safari)
- **사용 빈도**: 일 1회 (아침 또는 저녁)

**니즈 (Needs):**
1. 빠른 시장 현황 파악 (한눈에 보이는 요약)
2. 객관적인 근거 기반 의사결정
3. 히스토리 데이터를 통한 추세 확인
4. 중요한 변화 발생 시 즉각 알림

**페인 포인트 (Pain Points):**
- 여러 사이트를 돌아다니며 데이터 수집하는 번거로움
- 주관적 판단으로 인한 확증편향
- Google 스프레드시트의 제한적인 자동화 기능

**사용 시나리오:**
```
1. 아침 9시, 대시보드 접속
2. 종합 점수 및 시나리오 판정 확인 (5초)
3. 주요 변동 지표 확인 (10초)
4. 필요시 과거 추세 그래프 확인 (30초)
5. 수동 입력 필요 데이터가 있다면 관리자 UI로 입력 (2분)
```

---

## 4. 핵심 기능 명세

### 4.1 기능 우선순위

| 우선순위 | 기능 카테고리 | 설명 |
|---------|--------------|------|
| **P0** (필수) | 데이터 수집 자동화 | 7개 지표 자동 수집 |
| **P0** (필수) | 종합 점수 계산 | 10개 지표 기반 시나리오 판정 |
| **P0** (필수) | 관리자 UI | 수동 데이터 입력 인터페이스 |
| **P1** (중요) | 과거 데이터 추세 | 차트 및 히스토리 기능 |
| **P1** (중요) | 조건부 알림 | 이메일 알림 시스템 |
| **P2** (선택) | 데이터 내보내기 | CSV/Excel 다운로드 |

### 4.2 상세 기능 명세

#### 4.2.1 메인 대시보드 (Main Dashboard)

**기능 설명:**
- 10개 핵심 지표를 한 화면에 표시
- 종합 점수 및 시나리오 판정 상단 고정
- 각 지표별 전월 대비 변화 표시
- 색상 코딩으로 시각적 구분

**UI 구성요소:**
```
┌─────────────────────────────────────────────────────┐
│  📈 KOSPI 모니터링 대시보드                           │
├─────────────────────────────────────────────────────┤
│  종합 점수: 8/10  |  판정: 📈 강세 시나리오 (5,000 도전) │
├─────────────────────────────────────────────────────┤
│  ┌───────────────┬────────┬────────┬────────┬──────┐│
│  │ 지표명        │ 현재값 │ 전월비 │ 신호   │ 영향 ││
│  ├───────────────┼────────┼────────┼────────┼──────┤│
│  │ 외국인 순매수 │ +2.5조 │ +0.8조 │ 매수   │ ↑   ││
│  │ 원/달러 환율  │ 1,280  │ -15    │ 강세   │ ↑   ││
│  │ ...           │ ...    │ ...    │ ...    │ ... ││
│  └───────────────┴────────┴────────┴────────┴──────┘│
└─────────────────────────────────────────────────────┘
```

**색상 규칙:**
- 🟢 상승 신호: `#B6E388` (연두)
- 🔴 하락 신호: `#FFBABA` (연분홍)
- ⚪ 혼조: `#EEEEEE` (연회색)

**데이터 갱신:**
- 자동 수집 지표: 매일 오전 9시 자동 갱신
- 수동 입력 지표: 사용자가 직접 입력 시 즉시 반영

#### 4.2.2 추세 그래프 (Trend Chart)

**기능 설명:**
- 각 지표의 과거 데이터를 시계열 그래프로 표시
- 기간 선택 가능 (1개월, 3개월, 6개월, 1년)
- 종합 점수 추세도 별도 표시

**차트 타입:**
- 선 그래프 (Line Chart): 연속 데이터 (환율, 금리, PBR)
- 막대 그래프 (Bar Chart): 불연속 데이터 (순매수, 영업이익)
- 점수 차트: 종합 점수 히스토리 (색상 구간 표시)

**인터랙션:**
- 호버 시 정확한 수치 표시
- 특정 날짜 클릭 시 해당 시점의 전체 데이터 모달 표시

#### 4.2.3 관리자 UI (Admin Panel)

**기능 설명:**
- 수동 입력이 필요한 3개 지표 입력 폼 제공
- 과거 데이터 수정 기능 (잘못된 데이터 보정)
- 알림 설정 관리

**수동 입력 대상 지표:**
1. 메모리(HBM/DDR5) 평균 가격
2. 삼성전자+SK하이닉스 합산 분기 영업이익
3. 코리아 디스카운트/밸류업 추진 지수 (0~5점)
4. S&P500 PBR
5. AI CapEx 성장률

**입력 폼 구조:**
```
┌─────────────────────────────────────┐
│  수동 데이터 입력                    │
├─────────────────────────────────────┤
│  날짜: [2025-11-04]                 │
│  메모리 가격: [___] USD             │
│  반도체 영업이익: [___] 조원        │
│  밸류업 지수: [0-5점]               │
│  S&P500 PBR: [___]                  │
│  AI CapEx 성장률: [___] %           │
│                                      │
│  [저장] [취소]                       │
└─────────────────────────────────────┘
```

**검증 규칙:**
- 필수 입력 필드 확인
- 숫자 범위 검증 (예: 밸류업 지수 0~5)
- 중복 날짜 입력 방지 (경고 메시지 표시)

#### 4.2.4 알림 시스템 (Alert System)

**기능 설명:**
- 종합 점수가 특정 임계값을 넘을 때 이메일 알림
- 주요 지표 급변 시 알림
- 알림 조건은 사용자가 설정 가능

**알림 조건 예시:**
| 조건 | 설명 | 알림 메시지 |
|------|------|-------------|
| 종합 점수 ≥ 8 | 강세 시나리오 진입 | "📈 강세 신호 발생! 종합 점수 8점 돌파" |
| 종합 점수 ≤ 3 | 약세 시나리오 진입 | "📉 약세 경고! 종합 점수 3점 하회" |
| 외국인 순매수 > 1조 | 대규모 매수 유입 | "💰 외국인 순매수 1조 초과" |
| 환율 < 1,250 | 원화 급등 | "💱 원화 강세: 환율 1,250 이하" |

**이메일 형식:**
```
제목: [KOSPI 알림] 강세 신호 발생 (종합 점수 8/10)

본문:
안녕하세요,

2025-11-04 기준 KOSPI 모니터링 결과입니다.

📊 종합 점수: 8/10
📈 판정: 강세 시나리오 (5,000 도전)

주요 변동사항:
- 외국인 순매수: +2.5조 (전월 대비 +0.8조)
- 원/달러 환율: 1,280원 (전월 대비 -15원)

자세한 내용은 대시보드에서 확인하세요.
[대시보드 바로가기]
```

#### 4.2.5 데이터 히스토리 (Data History)

**기능 설명:**
- 모든 지표의 일별 히스토리 저장
- 최소 1년간 데이터 보존
- CSV/Excel 형식으로 내보내기 가능

**저장 구조:**
```json
{
  "date": "2025-11-04",
  "indicators": {
    "foreign_net_buying": 2500000000000,
    "usd_krw_rate": 1280,
    "memory_price": 8.5,
    "semiconductor_profit": 15.2,
    ...
  },
  "score": 8,
  "scenario": "bullish"
}
```

**데이터 보존 정책:**
- 일별 데이터: 무제한 보존
- 백업: 매주 자동 백업 (Railway PostgreSQL)
- 삭제 정책: 없음 (모든 히스토리 유지)

---

## 5. 기술 스택 및 아키텍처

### 5.1 기술 스택

#### Frontend
| 기술 | 버전 | 선정 이유 |
|------|------|-----------|
| **Next.js** | 14+ (App Router) | SSR/SSG 지원, 빠른 개발, Railway 배포 최적화 |
| **TypeScript** | 5+ | 타입 안정성, 개발 생산성 |
| **Tailwind CSS** | 3+ | 빠른 스타일링, 유틸리티 클래스 |
| **Recharts** | 2+ | 반응형 차트 라이브러리 (무료) |
| **React Hook Form** | 7+ | 폼 상태 관리 |
| **Zustand** | 4+ | 경량 상태 관리 |

#### Backend
| 기술 | 버전 | 선정 이유 |
|------|------|-----------|
| **Next.js API Routes** | 14+ | 풀스택 통합, 별도 서버 불필요 |
| **Prisma** | 5+ | TypeScript ORM, 마이그레이션 관리 |
| **PostgreSQL** | 15+ | Railway 기본 제공 DB |

#### 데이터 수집
| 기술 | 용도 |
|------|------|
| **Cheerio** | 웹 스크래핑 (네이버 금융, 한국거래소) |
| **Axios** | HTTP 클라이언트 |
| **Node-cron** | 일간 자동 수집 스케줄러 |

#### 배포 및 인프라
| 기술 | 용도 |
|------|------|
| **Railway** | 호스팅 (DB + App) |
| **Vercel** (대안) | 무료 프론트엔드 배포 (Railway 문제 시) |
| **Resend** | 이메일 발송 (무료 티어 3,000통/월) |

### 5.2 시스템 아키텍처

```
┌─────────────────────────────────────────────────────────┐
│                   User (Browser)                        │
└─────────────────┬───────────────────────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────────────────────────┐
│              Next.js Frontend (SSR/CSR)                 │
│  ┌──────────────┬──────────────┬──────────────┐        │
│  │ Dashboard    │ Admin Panel  │ Charts       │        │
│  │ Page         │ Page         │ Component    │        │
│  └──────────────┴──────────────┴──────────────┘        │
└─────────────────┬───────────────────────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────────────────────────┐
│            Next.js API Routes (Backend)                 │
│  ┌──────────────┬──────────────┬──────────────┐        │
│  │ /api/data    │ /api/admin   │ /api/alerts  │        │
│  │ (자동 수집)   │ (수동 입력)   │ (알림 관리)   │        │
│  └──────────────┴──────────────┴──────────────┘        │
└─────────────────┬───────────────────────────────────────┘
                  │
          ┌───────┴───────┬───────────────┐
          ▼               ▼               ▼
┌──────────────┐ ┌──────────────┐ ┌──────────────┐
│  Prisma ORM  │ │  Web Scraper │ │  Email API   │
│  (PostgreSQL)│ │  (Cheerio)   │ │  (Resend)    │
└──────────────┘ └──────────────┘ └──────────────┘
          │               │               │
          ▼               ▼               ▼
┌──────────────┐ ┌──────────────┐ ┌──────────────┐
│  Railway     │ │  External    │ │  Resend      │
│  PostgreSQL  │ │  Data Source │ │  SMTP        │
└──────────────┘ └──────────────┘ └──────────────┘
```

### 5.3 데이터베이스 스키마

```prisma
// Prisma Schema

model Indicator {
  id        String   @id @default(cuid())
  date      DateTime @unique

  // 자동 수집 지표
  foreignNetBuying    Float?   // 외국인 순매수 (억원)
  usdKrwRate          Float?   // 원/달러 환율
  kospiPbr            Float?   // 코스피 PBR
  us10YearRate        Float?   // 미 10년물 금리
  individualNetBuying Float?   // 개인 순매수 (억원)

  // 수동 입력 지표
  memoryPrice         Float?   // 메모리 가격 (USD)
  semiconductorProfit Float?   // 반도체 영업이익 (조원)
  valuationIndex      Int?     // 밸류업 지수 (0-5)
  sp500Pbr            Float?   // S&P500 PBR
  aiCapexGrowth       Float?   // AI CapEx 성장률 (%)

  // 계산 필드
  score               Int      // 종합 점수 (0-10)
  scenario            String   // bullish | bearish | neutral

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Alert {
  id        String   @id @default(cuid())
  condition String   // 조건 (예: "score >= 8")
  message   String   // 알림 메시지
  isActive  Boolean  @default(true)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model AlertHistory {
  id        String   @id @default(cuid())
  alertId   String
  triggeredAt DateTime
  sentTo    String   // 이메일 주소
  success   Boolean

  createdAt DateTime @default(now())
}
```

---

## 6. 데이터 소스 및 API 통합

### 6.1 자동 수집 지표

#### 6.1.1 외국인 순매수 (KOSPI)

**데이터 소스**: 네이버 금융
**URL**: `https://finance.naver.com/sise/sise_quant.naver?investorType=foreign`
**수집 방법**: 웹 스크래핑 (Cheerio)
**수집 주기**: 매일 오전 9시
**데이터 형식**: 숫자 (억원)

**스크래핑 코드 예시:**
```typescript
import axios from 'axios';
import * as cheerio from 'cheerio';

async function getForeignNetBuying(): Promise<number> {
  const url = 'https://finance.naver.com/sise/sise_quant.naver?investorType=foreign';
  const { data } = await axios.get(url);
  const $ = cheerio.load(data);

  const value = $('#contentarea_left > div:nth-child(2) > table > tbody > tr:nth-child(1) > td:nth-child(2)').text();
  return parseFloat(value.replace(/,/g, ''));
}
```

#### 6.1.2 원/달러 환율

**데이터 소스**: Investing.com 또는 한국수출입은행 API
**URL**: `https://www.koreaexim.go.kr/site/program/financial/exchangeJSON`
**수집 방법**: REST API
**수집 주기**: 매일 오전 9시
**데이터 형식**: 숫자 (원)

**API 호출 예시:**
```typescript
async function getUsdKrwRate(): Promise<number> {
  const apiKey = process.env.EXIM_API_KEY; // 무료 API 키
  const url = `https://www.koreaexim.go.kr/site/program/financial/exchangeJSON?authkey=${apiKey}&data=AP01`;

  const { data } = await axios.get(url);
  const usdData = data.find((item: any) => item.cur_unit === 'USD');
  return parseFloat(usdData.deal_bas_r.replace(/,/g, ''));
}
```

#### 6.1.3 코스피 PBR

**데이터 소스**: 네이버 금융 또는 FnGuide
**URL**: `https://finance.naver.com/sise/sise_index.naver?code=KOSPI`
**수집 방법**: 웹 스크래핑
**수집 주기**: 매일 오전 9시
**데이터 형식**: 숫자 (배수)

#### 6.1.4 미 10년물 국채금리

**데이터 소스**: FRED API (Federal Reserve Economic Data)
**URL**: `https://api.stlouisfed.org/fred/series/observations`
**수집 방법**: REST API
**수집 주기**: 매일 오전 9시
**데이터 형식**: 숫자 (%)

**API 호출 예시:**
```typescript
async function getUs10YearRate(): Promise<number> {
  const apiKey = process.env.FRED_API_KEY; // 무료 API 키
  const url = `https://api.stlouisfed.org/fred/series/observations?series_id=DGS10&api_key=${apiKey}&file_type=json&limit=1&sort_order=desc`;

  const { data } = await axios.get(url);
  return parseFloat(data.observations[0].value);
}
```

#### 6.1.5 개인 순매수

**데이터 소스**: 네이버 금융
**URL**: `https://finance.naver.com/sise/sise_quant.naver?investorType=individual`
**수집 방법**: 웹 스크래핑
**수집 주기**: 매일 오전 9시
**데이터 형식**: 숫자 (억원)

### 6.2 수동 입력 지표

| 지표 | 입력 주기 | 데이터 출처 (참고용) |
|------|----------|---------------------|
| 메모리 가격 | 주간 | DRAMeXchange (유료) → 뉴스 기사 참고 |
| 반도체 영업이익 | 분기 | 삼성전자/SK하이닉스 IR 자료 |
| 밸류업 지수 | 월간 | 자체 평가 (0-5점) |
| S&P500 PBR | 주간 | YCharts (무료 계정) |
| AI CapEx 성장률 | 분기 | Bloomberg/기업 실적 발표 |

### 6.3 데이터 수집 스케줄러

**Node-cron 설정:**
```typescript
import cron from 'node-cron';

// 매일 오전 9시에 자동 수집 실행
cron.schedule('0 9 * * *', async () => {
  console.log('[스케줄러] 데이터 수집 시작:', new Date());

  try {
    const data = {
      foreignNetBuying: await getForeignNetBuying(),
      usdKrwRate: await getUsdKrwRate(),
      kospiPbr: await getKospiPbr(),
      us10YearRate: await getUs10YearRate(),
      individualNetBuying: await getIndividualNetBuying(),
    };

    // DB 저장
    await prisma.indicator.create({ data });

    // 알림 조건 체크
    await checkAlertConditions(data);

    console.log('[스케줄러] 데이터 수집 완료');
  } catch (error) {
    console.error('[스케줄러] 수집 실패:', error);
    // 실패 알림 발송
    await sendErrorAlert(error);
  }
});
```

### 6.4 에러 핸들링 전략

| 에러 유형 | 대응 방안 |
|-----------|-----------|
| API 응답 없음 | 3회 재시도 후 이메일 알림 |
| 웹 스크래핑 실패 | HTML 구조 변경 감지 → 수동 수정 필요 알림 |
| 데이터 형식 오류 | 검증 실패 시 이전 데이터 유지 + 알림 |
| DB 저장 실패 | 로컬 파일에 백업 후 재시도 |

---

## 7. UI/UX 설계

### 7.1 화면 구성

#### 7.1.1 메인 대시보드 (/)

**레이아웃:**
```
┌─────────────────────────────────────────────────────────┐
│  📊 KOSPI 모니터링 대시보드          [관리자] [설정]    │
├─────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────┐│
│  │ 📈 종합 판정                                        ││
│  │ 점수: 8/10                                          ││
│  │ 상태: 강세 시나리오 (5,000 도전)                    ││
│  │ 업데이트: 2025-11-04 09:00                         ││
│  └─────────────────────────────────────────────────────┘│
│                                                          │
│  ┌─────────────────────────────────────────────────────┐│
│  │ 거시환경 (3/3)                                      ││
│  │ ✅ 원/달러 환율: 1,280원 (↓ 15) - 강세             ││
│  │ ✅ 미 10년물 금리: 4.2% (↓ 0.1) - 완화             ││
│  │ ✅ 외국인 순매수: +2.5조 (↑ 0.8조) - 매수          ││
│  └─────────────────────────────────────────────────────┘│
│                                                          │
│  ┌─────────────────────────────────────────────────────┐│
│  │ 펀더멘털 (3/4)                                      ││
│  │ ✅ 메모리 가격: $8.5 (↑ 0.3) - 상승                ││
│  │ ✅ 반도체 영업이익: 15.2조 (↑ 2.1조) - 호조        ││
│  │ ✅ 코스피 PBR: 1.15배 (→ 0) - 저평가               ││
│  │ ❌ S&P500 PBR: 5.2배 (↑ 0.1) - 고평가             ││
│  └─────────────────────────────────────────────────────┘│
│                                                          │
│  ┌─────────────────────────────────────────────────────┐│
│  │ 정책/수급 (2/3)                                     ││
│  │ ✅ 밸류업 지수: 4점 (↑ 1) - 진척                   ││
│  │ ⚠️ 개인 순매수: -1.2조 (↓ 0.5조) - 매도           ││
│  │ ✅ AI CapEx 성장률: +25% (↑ 5%p) - 확대           ││
│  └─────────────────────────────────────────────────────┘│
│                                                          │
│  [📊 추세 차트 보기] [📥 데이터 내보내기]               │
└─────────────────────────────────────────────────────────┘
```

**색상 코드:**
- ✅ 상승 신호: 초록 배경 (`bg-green-100`)
- ❌ 하락 신호: 빨강 배경 (`bg-red-100`)
- ⚠️ 혼조: 회색 배경 (`bg-gray-100`)

**반응형 설계:**
- 데스크톱 전용 (모바일 미지원)
- 최소 해상도: 1280x720

#### 7.1.2 추세 차트 페이지 (/charts)

**레이아웃:**
```
┌─────────────────────────────────────────────────────────┐
│  📈 추세 분석                              [뒤로가기]    │
├─────────────────────────────────────────────────────────┤
│  기간 선택: [1개월] [3개월] [6개월] [1년]              │
│                                                          │
│  ┌─────────────────────────────────────────────────────┐│
│  │ 종합 점수 추세                                      ││
│  │    10 ┤                                             ││
│  │     8 ┤    ●──●──●                                  ││
│  │     6 ┤  ●              ●                           ││
│  │     4 ┤●                  ●                         ││
│  │     2 ┤                                             ││
│  │     0 └──────────────────────────────────           ││
│  │       10/1  10/15  11/1  11/15  12/1               ││
│  └─────────────────────────────────────────────────────┘│
│                                                          │
│  ┌──────────────────────┬──────────────────────┐        │
│  │ 원/달러 환율         │ 외국인 순매수        │        │
│  │ [차트]               │ [차트]               │        │
│  └──────────────────────┴──────────────────────┘        │
│                                                          │
│  ┌──────────────────────┬──────────────────────┐        │
│  │ 메모리 가격          │ 반도체 영업이익      │        │
│  │ [차트]               │ [차트]               │        │
│  └──────────────────────┴──────────────────────┘        │
└─────────────────────────────────────────────────────────┘
```

#### 7.1.3 관리자 페이지 (/admin)

**레이아웃:**
```
┌─────────────────────────────────────────────────────────┐
│  ⚙️ 관리자 패널                         [대시보드로]    │
├─────────────────────────────────────────────────────────┤
│  📝 수동 데이터 입력                                    │
│  ┌─────────────────────────────────────────────────────┐│
│  │ 날짜: [2025-11-04]                                  ││
│  │                                                      ││
│  │ 메모리(HBM/DDR5) 평균 가격:                         ││
│  │ [_____] USD                                         ││
│  │                                                      ││
│  │ 삼성전자+SK하이닉스 영업이익:                       ││
│  │ [_____] 조원                                        ││
│  │                                                      ││
│  │ 밸류업 추진 지수:                                   ││
│  │ [0] [1] [2] [3] [4] [5]                            ││
│  │                                                      ││
│  │ S&P500 PBR:                                         ││
│  │ [_____] 배                                          ││
│  │                                                      ││
│  │ AI CapEx 성장률:                                    ││
│  │ [_____] %                                           ││
│  │                                                      ││
│  │         [저장하기] [초기화]                         ││
│  └─────────────────────────────────────────────────────┘│
│                                                          │
│  📧 알림 설정                                           │
│  ┌─────────────────────────────────────────────────────┐│
│  │ 이메일 주소: [user@example.com]                     ││
│  │                                                      ││
│  │ 알림 조건:                                          ││
│  │ ☑ 종합 점수 8점 이상                                ││
│  │ ☑ 종합 점수 3점 이하                                ││
│  │ ☑ 외국인 순매수 1조 초과                            ││
│  │ ☐ 환율 1,250원 이하                                 ││
│  │                                                      ││
│  │         [저장하기]                                   ││
│  └─────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────┘
```

### 7.2 인터랙션 설계

**호버 효과:**
- 지표 카드 호버 시 상세 설명 툴팁 표시
- 차트 데이터 포인트 호버 시 정확한 수치 표시

**로딩 상태:**
- 데이터 수집 중: 스켈레톤 UI 표시
- 에러 발생 시: 빨간 배너 + 재시도 버튼

**애니메이션:**
- 점수 변화 시 숫자 카운트 업 애니메이션
- 페이지 전환 시 부드러운 페이드 인/아웃

---

## 8. 개발 로드맵

### 8.1 Phase 1: MVP (2주)

**목표**: 기본 대시보드 + 자동 데이터 수집

| 주차 | 작업 내용 | 산출물 |
|------|-----------|--------|
| **Week 1** | - 프로젝트 초기 설정<br>- Next.js + TypeScript 보일러플레이트<br>- Railway 배포 환경 구축<br>- Prisma 스키마 설계<br>- DB 마이그레이션 | - 기본 프로젝트 구조<br>- DB 스키마 완성 |
| **Week 2** | - 자동 데이터 수집 API 구현 (5개 지표)<br>- 메인 대시보드 UI<br>- 종합 점수 계산 로직<br>- 스케줄러 설정 (Node-cron) | - 작동하는 MVP<br>- Railway 배포 완료 |

### 8.2 Phase 2: 고급 기능 (1주)

| 작업 | 세부 내용 | 소요 시간 |
|------|-----------|----------|
| **관리자 UI** | - 수동 데이터 입력 폼<br>- 유효성 검증<br>- DB 저장 | 2일 |
| **추세 차트** | - Recharts 통합<br>- 기간 선택 필터<br>- 반응형 차트 | 2일 |
| **알림 시스템** | - Resend API 통합<br>- 조건부 알림 로직<br>- 이메일 템플릿 | 2일 |

### 8.3 Phase 3: 최적화 및 테스트 (3일)

| 작업 | 세부 내용 |
|------|-----------|
| **성능 최적화** | - 이미지 최적화<br>- 캐싱 전략 (SWR)<br>- DB 쿼리 최적화 |
| **에러 핸들링** | - 전역 에러 바운더리<br>- 재시도 로직<br>- 에러 알림 |
| **테스트** | - 단위 테스트 (Jest)<br>- E2E 테스트 (Playwright) |

**총 예상 기간**: 약 3주 (빠른 개발 목표)

---

## 9. 비기능 요구사항

### 9.1 성능 요구사항

| 지표 | 목표값 | 측정 방법 |
|------|--------|-----------|
| **초기 로딩 속도** | ≤ 2초 | Lighthouse Performance |
| **차트 렌더링 속도** | ≤ 1초 | Chrome DevTools |
| **API 응답 시간** | ≤ 500ms | Network 탭 |
| **데이터베이스 쿼리** | ≤ 100ms | Prisma 로그 |

### 9.2 보안 요구사항

| 요구사항 | 구현 방법 |
|----------|-----------|
| **인증** | 환경 변수 기반 간단한 비밀번호 인증 |
| **HTTPS** | Railway 기본 제공 SSL |
| **환경 변수 보호** | .env 파일 gitignore |
| **SQL Injection 방지** | Prisma ORM 사용 |
| **XSS 방지** | React 기본 보호 + DOMPurify |

### 9.3 안정성 요구사항

| 요구사항 | 목표 | 구현 방법 |
|----------|------|-----------|
| **가용성** | 99% 이상 | Railway 모니터링 |
| **데이터 백업** | 매일 자동 | Railway 자동 백업 |
| **에러 복구** | 3회 재시도 | Axios retry 설정 |
| **로그 보존** | 30일 | Railway 로그 |

### 9.4 유지보수성

- **코드 컨벤션**: Prettier + ESLint
- **타입 안정성**: TypeScript Strict Mode
- **문서화**: JSDoc 주석 + README.md
- **버전 관리**: Git + GitHub

---

## 10. 위험 요소 및 대응 방안

### 10.1 기술적 위험

| 위험 | 확률 | 영향 | 대응 방안 |
|------|------|------|-----------|
| **웹 스크래핑 실패** (네이버 HTML 구조 변경) | 중 | 높음 | - 정기적 구조 검증<br>- 대체 데이터 소스 준비<br>- 실패 시 이메일 알림 |
| **무료 API 사용 제한** | 낮 | 중 | - 요청 수 모니터링<br>- 캐싱으로 API 호출 최소화<br>- 대체 API 리스트 준비 |
| **Railway 배포 오류** | 낮 | 중 | - Vercel 대체 배포 준비<br>- 로컬 Docker 환경 구축 |
| **데이터 손실** | 낮 | 높음 | - 매일 자동 백업<br>- CSV 수동 백업 다운로드 |

### 10.2 데이터 품질 위험

| 위험 | 확률 | 영향 | 대응 방안 |
|------|------|------|-----------|
| **잘못된 데이터 수집** | 중 | 중 | - 데이터 검증 로직<br>- 이상치 탐지 알고리즘<br>- 수동 검토 프로세스 |
| **수동 입력 누락** | 중 | 낮 | - 입력 알림 설정<br>- 누락 데이터 시각적 표시 |
| **타임존 불일치** | 낮 | 낮 | - UTC 기준 저장 + KST 표시 |

### 10.3 운영 위험

| 위험 | 확률 | 영향 | 대응 방안 |
|------|------|------|-----------|
| **스케줄러 중단** | 낮 | 높음 | - Health Check API<br>- UptimeRobot 모니터링<br>- 중단 시 이메일 알림 |
| **이메일 전송 실패** | 낮 | 중 | - Resend 상태 모니터링<br>- 재시도 로직 3회 |
| **비용 초과** | 낮 | 낮 | - Railway 무료 티어 모니터링<br>- 월간 비용 알림 설정 |

### 10.4 법적 위험

| 위험 | 확률 | 영향 | 대응 방안 |
|------|------|------|-----------|
| **웹 스크래핑 법적 문제** | 낮 | 중 | - robots.txt 준수<br>- 개인 사용 목적 명시<br>- 과도한 요청 방지 (Rate Limiting) |

---

## 11. 추가 고려사항

### 11.1 향후 확장 가능성

**Phase 4 이후 고려 사항 (우선순위 낮음):**
- 다크 모드 지원
- 모바일 앱 (React Native)
- 다중 사용자 계정 (인증 시스템)
- AI 기반 시장 예측 (머신러닝)
- 백테스팅 시뮬레이션
- 공개 공유 기능 (읽기 전용 링크)

### 11.2 성공 기준

프로젝트는 다음 조건을 만족할 때 성공으로 간주:
1. ✅ 자동 데이터 수집이 95% 이상 성공률로 작동
2. ✅ 종합 점수가 정확하게 계산됨
3. ✅ 추세 그래프가 시각적으로 명확하게 표시됨
4. ✅ 알림이 조건 충족 시 100% 발송됨
5. ✅ 대시보드 로딩 속도 2초 이하

---

## 12. 문서 관리

**문서 버전 히스토리:**

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|-----------|
| v1.0 | 2025-11-04 | Claude | 초안 작성 |

**승인:**
- [ ] 프로젝트 오너 승인
- [ ] 기술 검토 완료
- [ ] 개발 착수 승인

---

## 부록

### A. 참고 자료

- [Next.js 14 문서](https://nextjs.org/docs)
- [Prisma 문서](https://www.prisma.io/docs)
- [Recharts 문서](https://recharts.org/)
- [Railway 배포 가이드](https://docs.railway.app/)
- [Resend API 문서](https://resend.com/docs)

### B. 환경 변수 목록

```env
# Database
DATABASE_URL="postgresql://..."

# API Keys
FRED_API_KEY="..."       # FRED 데이터 API
EXIM_API_KEY="..."       # 한국수출입은행 환율 API

# Email
RESEND_API_KEY="..."     # Resend 이메일 API
ALERT_EMAIL="user@example.com"

# Admin
ADMIN_PASSWORD="..."     # 관리자 페이지 비밀번호 (간단 인증)
```

### C. 용어 사전

| 용어 | 설명 |
|------|------|
| **종합 점수** | 10개 지표의 상승/하락 신호를 종합한 점수 (0-10) |
| **시나리오 판정** | 종합 점수 기반 시장 전망 (강세/중립/약세) |
| **자동 수집** | API/웹 스크래핑으로 매일 자동으로 데이터 수집 |
| **수동 입력** | 사용자가 관리자 UI를 통해 직접 입력하는 데이터 |
| **히스토리** | 과거 데이터 기록 (최소 1년) |

---

**문서 끝**
